# Парсерт сайта Lenta.ru

### О приожении

1. Формат запросов - JSON
2. Формат ответов - JSON
3. Авторизация - JWT токен, время жизни 30 минут. Bearer Token
4. БД - PostgreSQL. Описание моделей БД - SQLAlchemu. Запросы к БД сырые

### API
1. Регистрация
URL:
http://127.0.0.1:5000/register

Тело запроса:
{
   "email": "ily@gmail.com",
   "password": "test"
}

Метод:
POST

2. Авторизация
URL:
http://127.0.0.1:5000/login

Тело запроса:
{
   "email": "ily@gmail.com",
   "password": "test"
}

Метод:
POST

Ответ:
{
  "auth_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE2MzIxNDE1NDksImlhdCI6MTYzMjEzOTc0OSwic3ViIjoxfQ.KbkgBgCApEJKgiwbSCDWQT1p7tLIYlbTdEcZQb1r4m0",
  "message": "Вход в систему осуществлён",
  "status": "Успешно"
}

3. Парсинг статьи с Lenta.ru
URL:
http://127.0.0.1:5000/article

Тело запроса:
{
   "link": "https://lenta.ru/news/2021/09/20/bye_sochi/"
}

Метод:
GET

Ответ:
{
  "author": "Нина Ташевская",
  "date": "14:26, 20 сентября 2021",
  "text": "Осенью 2021-го однокомнатная квартира в Сочи в среднем стоит 9,5 миллиона рублей (110 тысяч евро) — по такой цене за границей можно купить целый дом. Страны, где предлагаются дешевые и достойные альтернативы сочинским «однушкам», перечислили аналитики портала Prian.ru.По их данным, за 105 тысяч евро (9 миллионов рублей) можно приобрести 144-метровую виллу в Аланье, Турция. Жители охраняемого комплекса, где расположен дом, получают доступ к трем открытым бассейнам, турецкой бане, сауне, фитнес-центру, спортивным площадкам.За 99,5 тысячи евро (8,5 миллиона рублей) выставлен на продажу дом на одном из самых популярных курортов Северного Кипра — в Кирении. Полностью меблированный и укомплектованный бытовой техникой четырехкомнатный таунхаус построен в 200 метрах от пляжа.За 88 тысяч евро (7,5 миллиона рублей) можно купить 80-метровый дом в Шушани (Черногория), за 7,6 миллиона рублей — 96-метровый коттедж в поселении Чакви, расположенном в 15 километрах от Батуми (Грузия).Дома в бюджете сочинской «однушки» эксперты нашли также в Болгарии, Италии, Греции, Испании, Доминиканской Республике и в Таиланде.Ранее сообщалось, что в сентябре 2021-го самая дешевая дача в Сочи стоит 999 тысяч рублей. По такой цене выставлен на продажу 64-метровый дом на участке площадью шесть соток. Света на даче нет, владелец пользуется генератором электричества. На участке пробурена скважина, растут хурма, груши, яблони, сливы, фундук. До моря полчаса ходьбы.",
  "title": "Россиянам предложили дома за границей по цене однокомнатной квартиры в Сочи: Край: Среда обитания: Lenta.ru"
}

Параметры авторизации:
Bearer Token, полученный при login

4. Выход из системы
URL:
http://127.0.0.1:5000/logout

В заголовке указать токен

### Настройки

Задать переменную окружени FLASK_APP

Создать базу данных parser

Поменять настройки БД -> config.py


```sh

$ flask db init
$ flask db migrate
$ flask db upgrade
```

### Пуск приложения

```sh
$ python manage.py runserver
```